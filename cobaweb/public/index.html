<!DOCTYPE html>
<html lang="en">

<head>
    <title>Express</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>Daftar siswa</h1>
        <br />
        <br />
        <form action="/" method="GET" id="form-siswa">
            <div class="form-group">
                <input type="checkbox" class="form-check-input" name="checkId" id="exampleCheck1" />
                <label for="exampleInputEmail1"> id</label>
                <input type="integer" class="form-control" name="Id" value="" id="exampleInputEmail1"
                    aria-describedby="emailHelp" />
            </div>

            <div class="form-group">
                <input type="checkbox" class="form-check-input" name="checkString" id="exampleCheck1" />
                <label for="exampleInputEmail1">string</label>
                <input type="string" class="form-control" name="String" value="" id="exampleInputEmail1"
                    aria-describedby="emailHelp" />
            </div>
            <div class="form-group">
                <input type="checkbox" class="form-check-input" name="checkInteger" id="exampleCheck1" />
                <label for="exampleInputEmail1">integer</label>
                <input type="integer" class="form-control" name="Integer" value="" id="exampleInputEmail1"
                    aria-describedby="emailHelp" />


            </div>
            <div class="form-group">
                <input type="checkbox" class="form-check-input" name="checkFloat" id="exampleCheck1" />
                <label for="exampleInputEmail1">float</label>
                <input type="integer" class="form-control" name="Float" value="" id="exampleInputEmail1"
                    aria-describedby="emailHelp" />

            </div>
            <div class="form-group row">
                <label for="Date" class="col-sm-2 col-form-label">
                    <input class="form-check-input" type="checkbox" name="checkDate" value="" id="Date">
                    Date
                </label>
                <div class="col-sm-2">
                    <input type="date" name="startDate" class="form-control" id="Date" placeholder="start date">
                    <h6>to</h6>
                    <input type="date" name="endDate" class="form-control" id="Date" placeholder="end date">
                </div>
            </div>
            <div class="form-group form-check">
                <input type="checkbox" class="form-check-input" name="checkBoolean" id="exampleCheck1" />
                <label class="form-check-label" for="exampleCheck1">Boolean</label>
                <select class="custom-select custom-select-lg mb-3" name="boolean">
                    <option selected>Open this select menu</option>
                    <option value="true">True</option>
                    <option value="false">False</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary">SEARCH</button>

        </form>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>String</th>
                    <th>Integer</th>
                    <th>Float</th>
                    <th>Date</th>
                    <th>Boolean</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <div class="container">
            <h1>Edit Data/Tambah Data</h1>
            <form action="" method="post">
              <div class="row">
                <div class="col-sm-2">
                  <label for="string" class="col-sm-2 col-form-label">String</label>
                </div>
                <div class="col-sm-10">
                  <input
                    type="text"
                    class="form-control"
                    id="string"
                    name="string"
                    autocomplete="off"
                  />
                </div>
              </div>
              <br />
              <div class="row">
                <div class="col-sm-2">
                  <label for="integer" class="col-sm-2 col-form-label">Integer</label>
                </div>
                <div class="col-sm-10">
                  <input
                    type="text"
                    class="form-control"
                    id="integer"
                    name="integer"
                    autocomplete="off"
                  />
                </div>
              </div>
              <br />
              <div class="row">
                <div class="col-sm-2">
                  <label for="float" class="col-sm-2 col-form-label">Float</label>
                </div>
                <div class="col-sm-10">
                  <input
                    type="text"
                    class="form-control"
                    id="float"
                    name="float"
                    autocomplete="off"
                  />
                </div>
              </div>
              <br />
              <div class="row">
                <div class="col-sm-2">
                  <label for="date" class="col-sm-2 col-form-label">Date</label>
                </div>
                <div class="col-sm-10">
                  <input
                    type="text"
                    class="form-control"
                    id="date"
                    name="date"
                    autocomplete="off"
                  />
                </div>
              </div>
              <br />
              <div class="row">
                <div class="col-sm-2">
                  <label for="boolean" class="col-sm-2 col-form-label">Boolean</label>
                </div>
                <div class="col-sm-10">
                  <input
                    type="text"
                    class="form-control"
                    id="boolean"
                    name="boolean"
                    autocomplete="off"
                  />
                </div>
              </div>
      
              <button type="submit" class="btn btn-primary">UPDATE</button>
              <button type="submit"class="btn btn-primary" >SAVE</button>

            </form>
        
    </div>

    <script type="text/javascript">
        const API_URL = 'http://localhost:3000/api/'

        $(document).ready(() => {
            loadData();

            $('#form-siswa').submit((event) =>{
                event.preventDefault();
                let string = $('#string').val();
                let integer = $('#integer').val();
                let float = $('#float').val();
                let date = $('#date').val();
                let boolean = $('#boolean').val();
                addData({string, integer, float, date, boolean})

            })
        })


        const loadData = () => {
            $.ajax({
                method: "GET",
                url: `${API_URL}siswa21`

            }).done(function (data) {
                let html = '';
                data.forEach(item => {
                    html += `<tr>
      <th scope="row">${item.id}</th>
      <td>${item.string}</td>
      <td>${item.integer}</td>
      <td>${item.float}</td>
      <td>${item.date}</td>
      <td>${item.boolean}</td>
      <td>
        <button type="button" class="btn btn-danger">delete</button>
        <button type="button" class="btn btn-danger">edit</button>
        </td>
      
      </tr>`
                });
                $('table tbody').html(html)
            }).fail(function (jqXHR, textStatus) {
                alert("request Failed: " + textStatus);
            });
        }

        const addData = (siswa21) => {
            $.ajax({
                method: "POST",
                url: `${API_URL}siswa21`,
                data: siswa21

            }).done(function (data) {
               loadData();
            }).fail(function (jqXHR, textStatus) {
                alert("request Failed: " + textStatus);
            });
        }
        
    </script>
    
</body>


</html>